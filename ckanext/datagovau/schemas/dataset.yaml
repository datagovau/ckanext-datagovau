scheming_version: 2
dataset_type: dataset
about: A reimplementation of the default CKAN dataset schema
about_url: http://github.com/ckan/ckanext-scheming

dataset_fields:

- field_name: title
  label: Title
  preset: title
  required: true
  form_placeholder: e.g., A descriptive title
  display_property: "dc:title"
  validators: scheming_required unicode_safe
  form_attrs:
      data-module: slug-preview-target dga-url-helptext

- field_name: name
  label: URL
  required: true
  preset: dataset_slug
  form_snippet: dga-slug.html
  form_placeholder: eg. my-dataset
  help_text: The URL used to access the dataset. This is can be manually changed if required.

- field_name: notes
  required: true
  label: Description
  form_snippet: markdown.html
  form_placeholder: e.g., Some useful notes about the data
  display_property": "dc:description"
  help_allow_html: true
  help_text: Add notes about the dataset and what it contains. <a href="https://www.markdownguide.org/basic-syntax/">Markdown formatting</a> is supported.

- field_name: tag_string
  label: Keywords
  preset: dga_tag_string_autocomplete
  form_placeholder: e.g., economy, mental health, government
  help_text: Include relevant keywords to help users find your dataset. Maximum amount of keywords is 10.

- field_name: license_id
  label: License
  form_snippet: dga-license.html
  help_allow_html: true
  validators: default(notspecified)
  help_text: This will determine how users can legally access, use, modify, and share the data. More information can be found at <a href="http://opendefinition.org/">http://opendefinition.org/</a>.
  display_property: "dc:rights"

- field_name: unpublished
  label: Unpublished
  help_text: Allows you to report data that exists, but is not published. Any files uploaded will not appear publicly when checked.
  preset: dga_checkbox

- field_name: owner_org
  label: Organisation
  preset: dataset_organization
  form_snippet: dga-organization.html
  help_text: The entity publishing the dataset.

- field_name: spatial_coverage
  label: Coverage
  form_placeholder: The geographical area covered by the data; e.g., Canberra (GA1487)
  help_allow_html: true
  help_text: The geographical area the dataset covers. Options include point/polygon bounding box, an administrtive boundary API or a location name and ID from the National Gazelteer.
  form_attrs:
    data-module: autocomplete
    data-module-source: /api/2/util/gazetteer/autocomplete?q=?
    class: ""

- field_name: spatial
  form_snippet: null
  display_snippet: null
  validators: dga_spatial_from_coverage

- field_name: temporal_coverage_from
  required: true
  label: Reference Period From
  form_placeholder: The date at which timespan the dataset relates to  starts e.g., 2014-01-01
  help_text: The reference period in which the dataset begins.
  form_snippet: date.html
  validators: scheming_required isodate

- field_name:  temporal_coverage_to
  required: false
  label: Reference Period To
  form_placeholder: The date at which timespan the dataset relates to ends e.g., 2014-12-31
  help_text: The reference period in which the dataset ends. If the dataset doesn't have an end time series characteristics, this field can be left blank.
  form_snippet: date.html
  validators: scheming_required isodate

- field_name: language
  label: Language
  form_placeholder: English
  form_snippet: text.html

- field_name: author
  label: Data Custodian
  form_placeholder: Name of the dataset custodian
  display_property: dc:creator
  help_text: The custodians of the data (if different from the Data Publisher).

- field_name: contact_point
  label: Point of Contact
  required: true
  form_placeholder: Email address for questions about content of dataset
  display_property: dc:creator
  display_snippet: email.html
  display_email_name_field: author
  help_text: Contact email that users can obtain additional information from. Please use an email that is not dependant on a single person (e.g., a department wide email).

- field_name: geospatial_topic
  label: Geospatial Topic
  required: false
  preset: iso19115_topic_field
  help_text: Categorise datasets with Geospatial topic keywords, to align with likewise themes. ISO 19115-3. Optional but recommended.
  form_select_attrs:
    data-module: autocomplete
    class: ""

- field_name: archived
  label: Archive
  help_text: Allows you to report data that is no longer updated but is still published.
  preset: dga_checkbox
  display_snippet: null

# used by search tweaks field_relevance plugin
- field_name: promotion_level
  form_snippet: dga-hidden.html
  display_snippet: null
  validators: default(0)

# set by transmute, applies only to remote datasets
- field_name: remote_last_updated
  label: Remote Last Updated
  form_snippet: dga-hidden.html

- field_name: original_name
  display_snippet: null
  form_snippet: dga-hidden.html

# fields to avoid computing it in real time
- field_name: duplicate_score
  display_snippet: null
  form_snippet: null
  output_validators: dga_categorize_dataset

- field_name: original_harvest_source
  display_snippet: null
  form_snippet: null
  validators: unicode_safe
  output_validators: dga_detect_harvest_source

resource_fields:

- field_name: url
  label: URL
  preset: resource_url_upload
  validators: ignore_missing unicode_safe remove_whitespace dga_resource_format

- field_name: name
  label: File Name
  form_placeholder: eg. January 2011 Gold Prices
  help_text: The name of the file being uploaded.

- field_name: description
  label: File Description
  form_snippet: markdown.html
  form_placeholder: Some useful notes about the data
  help_allow_html: true
  help_text: A short description of the resource being uploaded. <a href="https://www.markdownguide.org/basic-syntax/">Markdown formatting</a> is supported.

- field_name: format
  label: Format
  preset: resource_format_autocomplete
  help_text: Specify the format of the uploaded file. If left blank, this will be automatically detected.

- field_name: zip_extract
  label: Extract Resources from Zip Files
  help_text: Upload multiple files in a single Zip. Selecting this option will automatically extract and upload individual files within the Zip.
  preset: dga_checkbox
  display_snippet: null
