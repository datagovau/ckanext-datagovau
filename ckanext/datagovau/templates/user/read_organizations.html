{% extends "user/read_base.html" %}

{% set user = user_dict %}
{% set orgs_available = h.dga_organizations_available(user.name) %}
{% set page = h.dga_paginate_items(orgs_available) %}

{% block page_primary_action %}
  {% if h.check_access('organization_create') %}
    {% link_for _('Add organisation'), named_route='organization.new', class_='btn btn-primary', icon='plus' %}
  {% endif %}
{% endblock %}

{% block primary_content_inner %}
  <h2 class="hide-heading">{{ h.humanize_entity_type('organization', org_type, 'facet label') or _('Organisations') }}</h2>
  {% if orgs_available %}
      <div class="wide">
          {% snippet "user/snippets/organization_list.html", organizations=page.items, show_capacity=True %}
      </div>
      {% block page_pagination %}
          {% snippet "user/snippets/page_pagination.html", page=page, id=user['id'] %}
    {% endblock %}
  {% else %}
    <p class="empty">
      {% if is_myself %}
        {{ h.humanize_entity_type('organization', org_type, 'you not member') or _('You are not a member of any organisations.') }}
      {% else %}
        {{ h.humanize_entity_type('organization', org_type, 'user not member') or _('User isn\'t a member of any organisations.') }}
      {% endif %}
    </p>
  {% endif %}
{% endblock %}
