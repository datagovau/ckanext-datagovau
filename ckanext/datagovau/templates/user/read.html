{% extends "user/read_base.html" %}

{% block page_primary_action %}
    {% if h.check_access('package_create') and user.datasets %}
        {% snippet 'snippets/add_dataset.html' %}
    {% endif %}
{% endblock %}

{% block primary_content_inner %}
    <h2 class="hide-heading">
        {% block page_heading %}{{ _('Datasets') }}{% endblock %}
    </h2>
    {% block package_list %}




        {% if user.datasets %}
            {# TODO: did you know that CKAN puts all user datasets inside `user.datasets`? How about creating a PR for out-of-the-box pagination?  #}
            {% set page = h.dga_paginate_items(user.datasets) %}

            {% snippet 'snippets/package_list.html', packages=page.items %}

            {% snippet "user/snippets/page_pagination.html", page=page, id=user['id'] %}
        {% else %}
            <div class="mb-5">
                {% if is_myself %}
                    <p class="empty">
                        {{ _('You haven\'t created any datasets.') }}
                        {% if h.check_access('package_create') %}
                            {% link_for _('Create one now?'), named_route='dataset.new' %}
                        {% endif %}
                    </p>
                {% else %}
                    <p class="empty">
                        {{ _('User hasn\'t created any datasets.') }}
                    </p>
                {% endif %}
            </div>
        {% endif %}
    {% endblock %}
{% endblock %}
