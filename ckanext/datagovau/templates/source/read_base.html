{% ckan_extends %}

{% block secondary_content %}
  <div class="module context-info">
    <section class="module-content">
      <h1 class="heading">{{ harvest_source.title }}</h1>
      {% if harvest_source.notes %}
        <p>
          {{ h.markdown_extract(harvest_source.notes, 180) }}
          {{ h.nav_link(_('View harvester details'), named_route='harvester.about', id=harvest_source.name) }}
        </p>
      {% else %}
        <p class="empty">{{ _('There is no description for this harvest source') }}</p>
      {% endif %}
      <section class="stats module module-narrow module-shallow">
        <div class="stats-wrapper">
          <div class="stat-box">
            <h2 class="stat-heading">{{ _('Datasets:') }}</h2>
            <span
              class="stat-number">{{ h.package_count_for_source(harvest_source.id) }}</span>
          </div>
        </div>
      </section>
    </section>
  </div>
{% endblock %}

{% block page_header %}
  <header class="module-content page-header">
    <ul class="nav nav-tabs">
      {% block page_header_tabs %}
        {{ h.build_nav_icon(c.dataset_type ~ '.read', _('Datasets'), id=harvest_source.name, icon='sitemap') }}
        {{ h.build_nav_icon('harvester.about', _('About'), id=harvest_source.name, icon='info-sign') }}
      {% endblock %}
    </ul>
  </header>
  {% block content_action %}
    {% if h.check_access('harvest_source_update', {'id':harvest_source.id }) %}
      <div class="content_action">
        {{ h.nav_link(_('Admin'), named_route='harvester.admin', id=harvest_source.name, class_='btn btn-primary', icon='wrench') }}
      </div>
    {% endif %}
  {% endblock %}
{% endblock %}
