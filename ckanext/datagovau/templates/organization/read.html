{% ckan_extends %}

{% block page_primary_action %}
  {{ super() }}
  {% if h.check_access('organization_update', {'id': group_dict.id}) %}
    {% link_for _('Manage'), named_route=group_type+'.edit', id=group_dict.name, class_='btn btn-default', icon='gear' %}
  {% endif %}
{% endblock %}

{% block groups_search_form %}
  {% set facets = {
        'fields': fields_grouped,
        'search': search_facets,
        'titles': facet_titles,
        'translated_fields': translated_fields,
        'remove_field': remove_field } %}
  {% set sorting = [
        (_('Relevance'), 'score desc, metadata_modified desc'),
        (_('Name Ascending'), 'title_string asc'),
        (_('Name Descending'), 'title_string desc'),
        (_('Last Modified'), 'metadata_modified desc')
        ] %}
  <label class="search-label" for="search">
    {{ _("Search data") }}
  </label>
  {% snippet 'snippets/search_form.html', form_id='organization-datasets-search-form', type=dataset_type, query=q, sorting=sorting, sorting_selected=sort_by_selected, count=page.item_count, facets=facets, placeholder=h.humanize_entity_type('package', dataset_type, 'search_placeholder') or _('Enter keyword or dataset name'), show_empty=request.args, fields=fields, include_children_option=true %}
{% endblock %}

{% block page_pagination %}
  <div class="pagination-container">
    {{ page.pager(q=q) }}
    {% if page.item_count %}
      <span class="pager-summary">
        {{ page.first_item }} - {{ page.last_item }} of {{ page.item_count }} results
      </span>
    {% endif %}
  </div>
{% endblock %}
